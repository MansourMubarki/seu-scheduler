<!doctype html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>{{ title or "SEU Scheduler" }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.4/dist/chart.umd.min.js"></script>
  </head>
  <body>
    <nav class="nav no-print">
      <div class="brand">
        <img src="{{ url_for('static', filename='img/seu-logo.png') }}" alt="SEU" style="width:32px;height:32px;object-fit:contain">
        <span>SEU Scheduler</span>
        <span class="badge">الجامعة السعودية الإلكترونية</span>
      </div>
      <div style="display:flex; gap:8px; align-items:center;">
        {% if session.get('user_id') %}
          <a class="btn btn-outline" href="{{ url_for('dashboard') }}">لوحتي</a>
          <a class="btn btn-outline" href="{{ url_for('logout') }}">تسجيل الخروج</a>
        {% else %}
          <a class="btn btn-outline" href="{{ url_for('login') }}">دخول</a>
          <a class="btn" href="{{ url_for('register') }}">تسجيل</a>
        {% endif %}
      </div>
    </nav>

    <main class="container">
      {% with messages = get_flashed_messages(with_categories=True) %}
        {% if messages %}
          <div class="no-print" style="margin: 8px 0;">
          {% for cat, msg in messages %}
            <div class="card" style="border-inline-start:6px solid {% if cat=='success' %}#12b886{% elif cat=='danger' %}#f03e3e{% elif cat=='warning' %}#f59e0b{% else %}#3b82f6{% endif %};">
              {{ msg }}
            </div>
          {% endfor %}
          </div>
        {% endif %}
      {% endwith %}

      {% block content %}{% endblock %}
    </main>

    <footer class="footer no-print">
      <small>© 2025 — مشروع تنظيم الجداول الدراسية — فكرة وتنفيذ المدرب منصور مباركي — تمت البرمجة بمساعدة ChatGPT</small>
    </footer>

    <script src="{{ url_for('static', filename='js/charts.js') }}"></script>
  </body>
</html>
